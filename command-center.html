<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMG COMMAND CENTER | THE CAPTAIN'S EDITION v9.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@100;300;400;500;600;700;800;900&family=Outfit:wght@100;300;400;500;700;900&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2fe;
            --accent: #8b5cf6;
            --danger: #ff4d4d;
            --bg: #050507;
            --panel: rgba(20, 20, 25, 0.85);
            --border: rgba(255, 255, 255, 0.08);
            --text: #f1f5f9;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        body { 
            background-color: var(--bg); 
            color: var(--text); 
            height: 100vh; 
            overflow: hidden; 
            display: flex;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(0, 242, 254, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.03) 0%, transparent 50%);
        }

        #app {
            display: grid;
            grid-template-columns: 420px 1fr 420px;
            width: 100%; height: 100vh;
            padding: 25px; gap: 25px;
        }

        /* Responsive Logic */
        @media (max-width: 1400px) { #app { grid-template-columns: 350px 1fr 350px; } }
        @media (max-width: 1100px) { #app { display: flex; flex-direction: column; overflow-y: auto; } .glass-panel { height: 600px; } }

        .glass-panel {
            background: var(--panel);
            backdrop-filter: blur(50px);
            border: 1px solid var(--border);
            border-radius: 40px;
            display: flex; flex-direction: column; overflow: hidden;
            box-shadow: 0 50px 100px rgba(0,0,0,0.9);
            transition: 0.3s;
        }

        /* --- Task System v9 --- */
        .scheduler-panel { padding: 35px; }
        .calendar-mini { margin-bottom: 30px; }
        .cal-header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 20px; }
        .cal-month { font-family: 'Outfit'; font-weight: 800; font-size: 1.3rem; color: var(--primary); letter-spacing: 1px; }
        .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; }
        .cal-day-label { color: #444; font-size: 0.65rem; font-weight: 900; text-align: center; }
        .cal-date { 
            aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
            border-radius: 14px; cursor: pointer; font-size: 0.85rem; transition: 0.2s;
        }
        .cal-date:hover { background: rgba(255,255,255,0.05); }
        .cal-date.active { background: var(--primary); color: #000; font-weight: 900; box-shadow: 0 10px 20px rgba(0, 242, 254, 0.2); }
        .cal-date.has { position: relative; }
        .cal-date.has::after { content: ""; position: absolute; bottom: 4px; width: 4px; height: 4px; background: var(--accent); border-radius: 50%; }

        .task-list { flex-grow: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; padding: 5px; }
        .task-item {
            background: rgba(255,255,255,0.03); border: 1px solid var(--border); padding: 20px; border-radius: 24px;
            display: flex; align-items: center; gap: 15px; cursor: pointer; transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
            position: relative; overflow: hidden;
        }
        .task-item:hover { transform: translateY(-3px); border-color: var(--primary); background: rgba(255,255,255,0.06); }
        .task-item.done { opacity: 0.3; filter: grayscale(1); }
        .check-box { width: 24px; height: 24px; border: 2.5px solid var(--border); border-radius: 8px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
        .task-item.done .check-box { background: var(--primary); border-color: var(--primary); color: #000; }
        
        .btn-del { 
            position: absolute; right: -40px; top: 0; height: 100%; width: 40px; 
            background: var(--danger); border: none; color: #fff; cursor: pointer; 
            transition: 0.3s; display: flex; align-items: center; justify-content: center;
        }
        .task-item:hover .btn-del { right: 0; }

        /* --- Center Hub: Focus & Control --- */
        .hub-main { display: flex; flex-direction: column; justify-content: space-between; padding: 40px 0; align-items: center; }
        
        .timer-display { text-align: center; display: none; }
        .timer-display.active { display: block; animation: zoomIn 0.5s forwards; }
        #timer-countdown { font-family: 'Outfit'; font-size: 8rem; font-weight: 100; color: var(--primary); line-height: 1; }
        #timer-label { font-size: 1rem; color: var(--accent); letter-spacing: 5px; margin-top: 10px; }

        .brand-pinnacle { text-align: center; }
        .brand-pinnacle h1 { font-family: 'Outfit'; font-size: 6.5rem; font-weight: 900; line-height: 0.8; letter-spacing: -3px; margin: 30px 0; }
        
        .control-panel { width: 100%; max-width: 800px; display: flex; flex-direction: column; gap: 30px; align-items: center; }
        .input-group {
            width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 100px;
            padding: 10px 10px 10px 40px; display: flex; align-items: center; gap: 15px; transition: 0.3s;
        }
        .input-group:focus-within { border-color: var(--primary); box-shadow: 0 0 50px rgba(0, 242, 254, 0.1); }
        #main-input { flex-grow: 1; background: transparent; border: none; outline: none; color: #fff; font-size: 1.25rem; font-weight: 300; }
        .btn-exec { width: 60px; height: 60px; border-radius: 50%; background: var(--primary); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        .chip-grid { display: flex; gap: 12px; }
        .chip { padding: 12px 24px; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 100px; cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: 0.3s; }
        .chip:hover { background: #fff; color: #000; }

        /* --- AI Persona --- */
        .chat-view { flex-grow: 1; padding: 35px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
        .msg { max-width: 90%; padding: 20px 25px; border-radius: 30px; font-size: 0.95rem; line-height: 1.6; }
        .msg.ai { background: rgba(255,255,255,0.04); color: #fff; border-bottom-left-radius: 5px; border: 1px solid var(--border); }
        .msg.user { background: var(--primary); color: #000; font-weight: 800; align-self: flex-end; border-bottom-right-radius: 5px; }

        .sys-footer { padding: 25px 35px; border-top: 1px solid var(--border); font-family: 'Space Mono'; font-size: 0.75rem; color: #444; display: flex; justify-content: space-between; }
        .dot { width: 8px; height: 8px; background: var(--primary); border-radius: 50%; display: inline-block; margin-right: 8px; vertical-align: middle; box-shadow: 0 0 10px var(--primary); }

        @keyframes zoomIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

    </style>
</head>
<body onload="initApp()">
    <main id="app">
        <!-- Dashboard: Tasks -->
        <section class="glass-panel scheduler-panel">
            <div class="calendar-mini">
                <header class="cal-header">
                    <span class="cal-month">FEBRUARY 2026</span>
                    <span style="font-size: 0.6rem; color: #444; font-weight: 900; letter-spacing: 2px;">TIMELINE_HUB</span>
                </header>
                <div class="cal-grid" id="cal-root">
                    <div class="cal-day-label">S</div><div class="cal-day-label">M</div><div class="cal-day-label">T</div><div class="cal-day-label">W</div><div class="cal-day-label">T</div><div class="cal-day-label">F</div><div class="cal-day-label">S</div>
                </div>
            </div>
            
            <div class="task-list" id="task-root">
                <!-- Tasks -->
            </div>
            <button onclick="aiPrompt('ìƒˆë¡œìš´ ë¯¸ì…˜ì„ ë§ì”€í•´ ì£¼ì„¸ìš”.')" style="margin-top:20px; padding:18px; border-radius:20px; border:1px dashed var(--primary); background:transparent; color:var(--primary); font-weight:800; cursor:pointer;">+ ADD NEW OBJECTIVE</button>
        </section>

        <!-- Command Hub -->
        <section class="hub-main">
            <!-- Focus Mode: Modern Timer -->
            <div class="timer-display" id="focus-hud">
                <div id="timer-countdown">00:00</div>
                <div id="timer-label">FOCUS_LEVEL_MAX</div>
            </div>

            <div class="brand-pinnacle" id="brand-box">
                <p style="font-family:'Space Mono'; font-size:0.8rem; color:var(--primary); letter-spacing:8px; opacity:0.6;">CAPTAIN_KIM_MIN_GYU</p>
                <h1>AI BASE</h1>
                <div style="font-family:'Outfit'; font-size:1.4rem; color:#444;">THE CONSUMER EDITION v9.0</div>
            </div>

            <div class="control-panel">
                <div class="chip-grid">
                    <div class="chip" onclick="handleChip('ì‹¤ì‹œê°„ AI ë‰´ìŠ¤ ì•Œë ¤ì¤˜')">ğŸŒ LIVE NEWS</div>
                    <div class="chip" onclick="handleChip('ì˜¤ëŠ˜ ì—…ë¬´ ê°ì‚¬ ë³´ê³ ì„œ ìƒì„±í•´')">ğŸ“Š AUDIT_REPORT</div>
                    <div class="chip" onclick="handleChip('ì „ì²´ ë¯¸ì…˜ ì´ˆê¸°í™”í•´ì¤˜')">ğŸ§¹ CLEAR_ALL</div>
                </div>

                <div class="input-group">
                    <input type="text" id="main-input" placeholder="ëª…ë ¹ì„ ë‚´ë¦¬ê±°ë‚˜ ì¼ì •ì„ ì…ë ¥í•˜ì„¸ìš”... (ì˜ˆ: 1ì‹œê°„ ê³µë¶€í• ê±°ì•¼)" autocomplete="off">
                    <button class="btn-exec" onclick="processInput()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    </button>
                </div>
            </div>
        </section>

        <!-- AI Persona Sidebar -->
        <section class="glass-panel AI-persona">
            <div class="chat-view" id="chat-root">
                <div class="msg ai">
                    ì•ˆë…•í•˜ì‹­ë‹ˆê¹Œ ëŒ€ì¥ë‹˜. **Secretary Kim(ê¹€ë¹„ì„œ)**ì…ë‹ˆë‹¤. <br>ì˜¤ëŠ˜ í•˜ë£¨ ëŒ€ì¥ë‹˜ì´ ë˜ì–´ ëª¨ë“  ì‹œìŠ¤í…œì„ ì ê²€í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. <br>ì´ì œ ë”ìš± ì‚¬ìš©ì ì¹œí™”ì ì´ê³  ì§ê´€ì ì¸ **v9.0 Captain's Edition**ì„ ë§Œë‚˜ë³´ì‹­ì‹œì˜¤.
                </div>
            </div>
            <div class="sys-footer">
                <span><span class="dot"></span> STATUS: CORE_STABLE</span>
                <span id="digital-clock">21:16</span>
            </div>
        </section>
    </main>

    <script>
        // --- Persistence & State ---
        let selectedDate = new Date().toDateString();
        let store = JSON.parse(localStorage.getItem('kmg_v9_pinnacle')) || {
            [new Date().toDateString()]: [
                { id: 1, text: "ì‚¬ìš©ì ì¤‘ì‹¬ UX ìµœì¢… ê°ì‚¬", done: true },
                { id: 2, text: "Focus Mode ë° ì‚­ì œ ë¡œì§ êµ¬í˜„", done: false }
            ]
        };

        // --- Init ---
        function initApp() {
            renderCal();
            renderTasks();
            updateTime();
            setInterval(updateTime, 1000);
            document.getElementById('main-input').addEventListener('keypress', (e) => { if(e.key === 'Enter') processInput(); });
        }

        function updateTime() {
            const now = new Date();
            const pad = n => String(n).padStart(2,'0');
            document.getElementById('digital-clock').textContent = `${pad(now.getHours())}:${pad(now.getMinutes())}`;
        }

        // --- Scheduler UI ---
        function renderCal() {
            const root = document.getElementById('cal-root');
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const labels = root.querySelectorAll('.cal-day-label');
            root.innerHTML = '';
            labels.forEach(l => root.appendChild(l));

            const days = new Date(year, month + 1, 0).getDate();
            for(let i=1; i<=days; i++) {
                const d = new Date(year, month, i);
                const dStr = d.toDateString();
                const node = document.createElement('div');
                node.className = `cal-date ${dStr === selectedDate ? 'active' : ''}`;
                if(store[dStr] && store[dStr].length > 0) node.className += ' has';
                node.textContent = i;
                node.onclick = () => { selectedDate = dStr; renderCal(); renderTasks(); };
                root.appendChild(node);
            }
        }

        function renderTasks() {
            const root = document.getElementById('task-root');
            root.innerHTML = '';
            const list = store[selectedDate] || [];
            
            if(list.length === 0) {
                root.innerHTML = `<div style="text-align:center; padding:50px; color:#333; font-size:0.9rem;">(ì„¤ì •ëœ ëª©í‘œê°€ ì—†ìŠµë‹ˆë‹¤)</div>`;
            }

            list.forEach(t => {
                const item = document.createElement('div');
                item.className = `task-item ${t.done ? 'done' : ''}`;
                item.onclick = () => { t.done = !t.done; save(); renderTasks(); };
                item.innerHTML = `
                    <div class="check-box">${t.done ? 'âœ“' : ''}</div>
                    <div style="font-weight:600;">${t.text}</div>
                    <button class="btn-del" onclick="event.stopPropagation(); deleteTask(${t.id})">Del</button>
                `;
                root.appendChild(item);
            });
        }

        function deleteTask(id) {
            store[selectedDate] = store[selectedDate].filter(t => t.id !== id);
            save(); renderTasks(); renderCal();
            aiSay("í•´ë‹¹ ë¯¸ì…˜ì„ ëª©ë¡ì—ì„œ ì˜êµ¬ ì‚­ì œ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.");
        }

        function save() { localStorage.setItem('kmg_v9_pinnacle', JSON.stringify(store)); }

        // --- Intelligence Layer ---
        function processInput() {
            const input = document.getElementById('main-input');
            const val = input.value.trim();
            if(!val) return;

            addUserMsg(val);
            input.value = '';

            // FOCUS MODE DETECTION (e.g. "2ì‹œê°„ ê³µë¶€", "10ë¶„ íœ´ì‹")
            const timerMatch = val.match(/(\d+)\s*(ì‹œê°„|ë¶„)/);
            if(timerMatch) {
                const amount = parseInt(timerMatch[1]);
                const unit = timerMatch[2];
                const totalSeconds = unit === 'ì‹œê°„' ? amount * 3600 : amount * 60;
                startFocus(totalSeconds, val);
            } else if(val.includes('ë‰´ìŠ¤')) {
                apiNews();
            } else if(val.includes('ë³´ê³ ì„œ')) {
                apiReport();
            } else if(val.includes('ì´ˆê¸°í™”')) {
                if(confirm("ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                    localStorage.clear(); location.reload();
                }
            } else {
                syncTask(val);
            }
        }

        function syncTask(t) {
            if(!store[selectedDate]) store[selectedDate] = [];
            store[selectedDate].push({ id: Date.now(), text: t, done: false });
            save(); renderTasks(); renderCal();
            aiSay(`ì•Œê² ìŠµë‹ˆë‹¤ ëŒ€ì¥ë‹˜. **"${t}"** ì„ë¬´ë¥¼ í˜„ ì‹œê° ì „ëµ ëª©í‘œì— ì¶”ê°€í–ˆìŠµë‹ˆë‹¤.`);
        }

        function startFocus(sec, label) {
            document.getElementById('brand-box').style.display = 'none';
            const hud = document.getElementById('focus-hud');
            hud.classList.add('active');
            
            syncTask(label); // Also add to task list

            let remain = sec;
            const timerInt = setInterval(() => {
                const m = Math.floor(remain / 60);
                const s = remain % 60;
                document.getElementById('timer-countdown').textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
                if(remain <= 0) {
                    clearInterval(timerInt);
                    hud.classList.remove('active');
                    document.getElementById('brand-box').style.display = 'block';
                    aiSay("ğŸ•’ ì§‘ì¤‘ ì‹œê°„ ì¢…ë£Œ! ëŒ€ì¥ë‹˜, ì •ë§ ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤.");
                }
                remain--;
            }, 1000);

            aiSay(`ëŒ€ì¥ë‹˜, ê³ ìš”ì˜ ì‹œê°„(**Focus Mode**)ì„ ì‹œì‘í•©ë‹ˆë‹¤. **"${label}"**ì— ì§‘ì¤‘í•˜ì‹­ì‹œì˜¤. ì™¸ë¶€ í†µì‹ ì„ ì œí•œí•˜ê² ìŠµë‹ˆë‹¤.`);
        }

        // --- Mock APIs ---
        async function apiNews() {
            aiSay("ğŸŒ ê¸€ë¡œë²Œ AI íŠ¸ë Œë“œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ì† ì¤‘...");
            try {
                const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent('https://news.google.com/rss/search?q=Artificial+Intelligence&hl=ko&gl=KR&ceid=KR:ko')}`);
                const data = await res.json();
                let html = `**[ì‹¤ì‹œê°„ AI NEWS FEED]** <br><br>`;
                data.items.slice(0, 3).forEach(i => html += `â€¢ [${i.title}](${i.link}) <br><br>`);
                aiSay(html);
            } catch(e) { aiSay("ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ ë¬´ê²°ì„± í™•ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."); }
        }

        function apiReport() {
            aiSay("ğŸ“Š ëŒ€ì¥ë‹˜ì„ ìœ„í•œ **'ì‚¬ìš©ì ì¤‘ì‹¬ ê°ì‚¬ ë³´ê³ ì„œ'** ìƒì„± ì¤‘...");
            setTimeout(() => {
                const allTasks = Object.values(store).flat();
                const done = allTasks.filter(t=>t.done).length;
                const total = allTasks.length;
                aiSay(`**[v9.0 AUDIT REPORT]** <br><br> â€¢ **í”„ë¡œë•íŠ¸ ê°€ì¹˜**: ìµœìƒ (v9.0 ì»¨ìŠˆë¨¸ ì—ë””ì…˜ ì•ˆì°©)<br> â€¢ **ëˆ„ì  ì „ëµ ë‹¬ì„±**: ${done}/${total} (${Math.round(done/total*100) || 0}%)<br> â€¢ **ê¹€ë¹„ì„œ ì´í‰**: ëŒ€ì¥ë‹˜, ì´ì œ ê¸°ëŠ¥ ì§€ì—° ì—†ì´ ëŒ€ì¥ë‹˜ì˜ ìƒê°ë§Œìœ¼ë¡œ êµ¬ë™ë˜ëŠ” ì™„ë²½í•œ ì»¤ë§¨ë“œ ì„¼í„°ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.`);
            }, 1200);
        }

        function handleChip(c) { document.getElementById('main-input').value = c; processInput(); }
        function addUserMsg(t) { const r = document.getElementById('chat-root'); const e = document.createElement('div'); e.className='msg user'; e.textContent=t; r.appendChild(e); r.scrollTop=r.scrollHeight; }
        function aiSay(t) { const r = document.getElementById('chat-root'); const e = document.createElement('div'); e.className='msg ai'; e.innerHTML=t; r.appendChild(e); r.scrollTop=r.scrollHeight; }
        function aiPrompt(q) { const val = prompt(q); if(val) { document.getElementById('main-input').value = val; processInput(); } }

    </script>
</body>
</html>
