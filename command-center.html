<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMG COMMAND CENTER | STRATEGIC FLOW v14.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@100;300;400;500;600;700;800;900&family=Outfit:wght@100;300;400;500;700;900&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2fe;
            --accent: #8b5cf6;
            --danger: #ff4d4d;
            --bg: #030305;
            --panel: rgba(10, 10, 15, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --text: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        body { background-color: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; position: relative; }
        
        .ether-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: 
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 242, 254, 0.15) 0%, transparent 50%);
            filter: blur(80px); animation: ether 20s infinite alternate;
        }
        @keyframes ether { from { transform: scale(1); } to { transform: scale(1.1) translate(20px, 20px); } }

        .wand {
            position: fixed; width: 600px; height: 600px;
            background: radial-gradient(circle at center, rgba(0, 242, 254, 0.1) 0%, transparent 70%);
            pointer-events: none; z-index: 9999; transform: translate(-50%, -50%); mix-blend-mode: screen;
        }

        #app {
            display: grid; grid-template-columns: 280px 1fr 320px;
            width: 100%; height: 100vh; padding: 20px; gap: 20px; position: relative; z-index: 10;
        }

        .glass { background: var(--panel); backdrop-filter: blur(60px); border: 1px solid var(--border); border-radius: 36px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 40px 100px rgba(0,0,0,0.6); }

        /* --- Sidebar Navigation --- */
        .sidebar { padding: 30px; display: flex; flex-direction: column; gap: 15px; }
        .nav-btn {
            padding: 16px 20px; border-radius: 16px; cursor: pointer; display: flex; align-items: center; gap: 12px;
            font-weight: 600; transition: 0.3s; color: rgba(255,255,255,0.4); font-size: 0.9rem; border: 1px solid transparent;
        }
        .nav-btn.active { background: rgba(0, 242, 254, 0.08); border-color: var(--primary); color: var(--primary); }

        /* Mini Monthly Map in Sidebar for Daily */
        .mini-cal { padding: 15px; background: rgba(255,255,255,0.03); border-radius: 20px; border: 1px solid var(--border); margin-top: 20px; }
        .mini-cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; text-align: center; }
        .mini-day { font-size: 0.65rem; color: #444; }
        .mini-date { font-size: 0.75rem; padding: 5px 0; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .mini-date:hover { background: rgba(255,255,255,0.05); }
        .mini-date.active { background: var(--primary); color: #000; font-weight: 800; }

        /* --- Main Context --- */
        .main { padding: 35px; display: flex; flex-direction: column; overflow: hidden; }
        .section { display: none; height: 100%; flex-direction: column; overflow: hidden; }
        .section.active { display: flex; }

        .h-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; flex-shrink: 0; }
        .h-row h2 { font-family: 'Outfit'; font-size: 1.8rem; letter-spacing: -1px; }

        .list { flex-grow: 1; overflow-y: auto; padding-right: 10px; display: flex; flex-direction: column; gap: 12px; }
        .card { 
            background: rgba(255,255,255,0.02); border: 1px solid var(--border); padding: 18px 20px; border-radius: 20px;
            display: flex; align-items: center; gap: 15px; transition: 0.3s;
        }
        .card:hover { border-color: var(--primary); transform: translateX(5px); }
        .card.done { opacity: 0.25; }
        .chk { width: 22px; height: 22px; border: 2.5px solid var(--border); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .card.done .chk { background: var(--primary); border: none; }
        
        /* Inline Edit Selectors */
        .inline-sel { background: transparent; border: none; color: var(--accent); font-size: 0.65rem; font-weight: 800; cursor: pointer; text-transform: uppercase; }

        /* Calendar View (Monthly Vision) */
        .cal-map { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: 30px repeat(5, 1fr); gap: 8px; flex-grow: 1; height: 100%; overflow: hidden; border: 1px solid var(--border); border-radius: 20px; padding: 12px; }
        .cal-lbl { text-align: center; font-size: 0.65rem; font-weight: 800; color: #444; }
        .cell { border: 1px solid rgba(255,255,255,0.03); border-radius: 10px; padding: 8px; font-size: 0.8rem; overflow-y: auto; display: flex; flex-direction: column; gap: 4px; }
        .cell::-webkit-scrollbar { width: 0; }
        .tag { font-size: 0.6rem; padding: 3px 6px; border-radius: 4px; line-height: 1.2; }
        .tag.major { background: var(--primary); color: #000; font-weight: 800; }
        .tag.mid { background: var(--accent); color: #fff; }
        .tag.daily { background: rgba(255,255,255,0.1); color: #fff; }

        /* --- Footer Input --- */
        .bar { display: flex; gap: 10px; margin-top: 25px; background: rgba(255,255,255,0.03); padding: 15px; border-radius: 20px; }
        .in { background: #000; border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 12px; font-size: 0.85rem; outline: none; }
        .btn { background: var(--primary); color: #000; font-weight: 800; border: none; padding: 0 25px; border-radius: 12px; cursor: pointer; }

        /* Sidebar Right News/Brief */
        .side-r { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
        .node { background: rgba(255,255,255,0.02); padding: 20px; border-radius: 24px; border: 1px solid var(--border); }

    </style>
</head>
<body onmousemove="moveWand(event)">
    <div class="ether-bg"></div>
    <div class="wand" id="wand"></div>

    <main id="app">
        <section class="sidebar glass">
            <h2 style="font-family:'Outfit'; font-size:1.3rem; color:var(--primary); letter-spacing:2px; margin-bottom:15px;">KMG BASE</h2>
            <div class="nav-btn active" id="nav-daily" onclick="ui('daily')"><span>üìå</span> DAILY ACTIONS</div>
            <div class="nav-btn" id="nav-weekly" onclick="ui('weekly')"><span>üìä</span> WEEKLY GOALS</div>
            <div class="nav-btn" id="nav-monthly" onclick="ui('monthly')"><span>üóìÔ∏è</span> MONTHLY VISION</div>

            <div class="mini-cal" id="sidebar-cal-box">
                <p style="font-size:0.6rem; color:#444; margin-bottom:10px; font-weight:800; letter-spacing:1px;">RAPID DATE SELECT</p>
                <div class="mini-cal-grid" id="mini-cal-root"></div>
            </div>
        </section>

        <section class="main glass">
            <!-- DAILY -->
            <div id="v-daily" class="section active">
                <div class="h-row">
                    <h2 id="d-title">Daily: Feb 13</h2>
                    <button class="btn" style="background:var(--accent); color:#fff; padding:8px 15px;" onclick="genReport('daily')">REPORT</button>
                </div>
                <div class="list" id="d-list"></div>
                <div class="bar">
                    <input type="text" id="d-t" class="in" style="width:85px;" placeholder="09:00">
                    <input type="text" id="d-x" class="in" style="flex:1;" placeholder="ÏùºÍ∞Ñ ÌñâÎèô ÏûÖÎ†• (ÏÜå)">
                    <select id="d-p" class="in" style="width:130px;"></select>
                    <button class="btn" onclick="addD()">ADD</button>
                </div>
            </div>

            <!-- WEEKLY -->
            <div id="v-weekly" class="section">
                <div class="h-row">
                    <h2>Weekly Hub</h2>
                    <div style="display:flex; gap:10px; align-items:center;">
                        <button class="btn" onclick="weekShift(-1)">‚óÅ</button>
                        <span id="w-label" style="font-size:0.85rem; font-weight:700;">Week 7</span>
                        <button class="btn" onclick="weekShift(1)">‚ñ∑</button>
                    </div>
                </div>
                <div class="list" id="w-list"></div>
                <div class="bar">
                    <input type="text" id="w-x" class="in" style="flex:1;" placeholder="Ï£ºÍ∞Ñ Ï†ÑÎûµ Î™©Ìëú ÏûÖÎ†• (Ï§ë)">
                    <select id="w-p" class="in" style="width:140px;"></select>
                    <button class="btn" onclick="addW()">ADD</button>
                </div>
            </div>

            <!-- MONTHLY -->
            <div id="v-monthly" class="section">
                <div class="h-row">
                    <h2>Monthly Vision</h2>
                    <select id="m-month-sel" class="in" style="width:120px;" onchange="renderM()">
                        <option value="1">February</option>
                        <option value="2">March</option>
                    </select>
                </div>
                <div class="cal-map" id="cal-root"></div>
                <div class="bar">
                    <input type="text" id="m-x" class="in" style="flex:1;" placeholder="Ïù¥Î≤à Îã¨ ÌïµÏã¨ ÌîÑÎ°úÏ†ùÌä∏ ÏûÖÎ†• (ÎåÄ)">
                    <button class="btn" onclick="addM()">ADD VISION</button>
                </div>
            </div>
        </section>

        <section class="side-r glass">
            <div class="node">
                <span style="font-size:0.6rem; color:#444; letter-spacing:2px;">LOCAL_STRATEGY_TIME</span>
                <p id="clock" style="font-family:'Space Mono'; font-size:1.8rem; color:var(--primary); margin:5px 0;">21:50</p>
                <p id="date" style="font-size:0.75rem; opacity:0.5;">Feb 13, 2026</p>
            </div>
            <div class="node" style="flex:1; overflow:hidden; display:flex; flex-direction:column;">
                <span style="font-size:0.6rem; color:#444; letter-spacing:2px; margin-bottom:15px;">GLOBAL AI PULSE</span>
                <div id="news" style="overflow-y:auto; flex:1; display:flex; flex-direction:column; gap:15px;"></div>
            </div>
        </section>
    </main>

    <script>
        // --- State Management v14 ---
        let selDate = new Date().toDateString();
        let selMonth = 1; // Feb (0-indexed base 1)
        let selWeek = 7;  // 2026 Week 7
        let db = JSON.parse(localStorage.getItem('kmg_v14_db')) || { m: [], w: [], d: [] };

        function moveWand(e) {
            const w = document.getElementById('wand');
            w.style.left = e.clientX + 'px'; w.style.top = e.clientY + 'px';
        }

        function ui(v) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`v-${v}`).classList.add('active');
            document.getElementById(`nav-${v}`).classList.add('active');
            
            // Show/Hide Mini Cal based on Daily view
            document.getElementById('sidebar-cal-box').style.display = (v === 'daily') ? 'block' : 'none';
            render();
        }

        // --- Monthly (ÎåÄ) ---
        function renderM() {
            const root = document.getElementById('cal-root'); root.innerHTML = '';
            ["S","M","T","W","T","F","S"].forEach(l => root.innerHTML += `<div class="cal-lbl">${l}</div>`);
            
            const month = parseInt(document.getElementById('m-month-sel').value);
            const y=2026, days=new Date(y, month+1, 0).getDate(), first=new Date(y, month, 1).getDay();
            
            for(let i=0; i<first; i++) root.innerHTML += `<div></div>`;
            for(let i=1; i<=days; i++) {
                const ds = new Date(y, month, i).toDateString();
                const majors = db.m.filter(it => it.month == month);
                const mids = db.w.filter(it => it.ds === ds); // If you decide to link weekly to day, but here weekly is just week-based.
                const dailies = db.d.filter(it => it.ds === ds);
                
                let h = `<div class="cell ${ds === selDate ? 'today' : ''}"><b>${i}</b>`;
                // Show Majors if i=1 for representative or all? Let's show Majors at the start or dedicated area? 
                // User said "Add Monthly Milestone", let's list them in a special "Goal Box" in Monthly view as well.
                majors.forEach(it => h += `<div class="tag major">${it.text}</div>`);
                dailies.forEach(it => h += `<div class="tag daily">${it.text}</div>`);
                h += `</div>`; root.innerHTML += h;
            }
            updateSels();
        }
        function addM() {
            const txt = document.getElementById('m-x').value;
            const month = document.getElementById('m-month-sel').value;
            if(!txt) return;
            db.m.push({ id: Date.now(), text: txt, month, done: false });
            document.getElementById('m-x').value = '';
            render(); save();
        }

        // --- Weekly (Ï§ë) ---
        function renderW() {
            const root = document.getElementById('w-list'); root.innerHTML = '';
            document.getElementById('w-label').textContent = `Week ${selWeek}`;
            const list = db.w.filter(it => it.week == selWeek);
            list.forEach(it => {
                root.innerHTML += `
                    <div class="card ${it.done?'done':''}">
                        <div class="chk" onclick="tog('w',${it.id})">${it.done?'‚úì':''}</div>
                        <div style="flex:1;">
                            <select class="inline-sel" onchange="upP('w',${it.id},this.value)">${optM(it.pid)}</select>
                            <div class="t-txt">${it.text}</div>
                        </div>
                        <button onclick="del('w',${it.id})" style="background:transparent; border:none; color:var(--danger); cursor:pointer;">‚úï</button>
                    </div>`;
            });
        }
        function addW() {
            const txt = document.getElementById('w-x').value, pid = document.getElementById('w-p').value;
            if(!txt) return;
            db.w.push({ id: Date.now(), text: txt, week: selWeek, pid, done: false });
            document.getElementById('w-x').value = '';
            render(); save();
        }
        function weekShift(v) { selWeek += v; renderW(); }

        // --- Daily (ÏÜå) ---
        function renderD() {
            const root = document.getElementById('d-list'); root.innerHTML = '';
            document.getElementById('d-title').textContent = `Daily: ${selDate.split(' ').slice(1,3).join(' ')}`;
            const list = db.d.filter(it => it.ds === selDate);
            list.forEach(it => {
                root.innerHTML += `
                    <div class="card ${it.done?'done':''}">
                        <div class="chk" onclick="tog('d',${it.id})">${it.done?'‚úì':''}</div>
                        <div style="flex:1;">
                            <select class="inline-sel" onchange="upP('d',${it.id},this.value)">${optW(it.pid)}</select>
                            <div class="t-txt"><span style="color:var(--primary); font-family:'Space Mono'; font-size:0.75rem;">${it.time}</span> ${it.text}</div>
                        </div>
                        <button onclick="del('d',${it.id})" style="background:transparent; border:none; color:var(--danger); cursor:pointer;">‚úï</button>
                    </div>`;
            });
            renderMini();
        }
        function addD() {
            const t = document.getElementById('d-t').value, x = document.getElementById('d-x').value, pid = document.getElementById('d-p').value;
            if(!x) return;
            db.d.push({ id: Date.now(), text: x, time: t, ds: selDate, pid, done: false });
            document.getElementById('d-x').value = '';
            render(); save();
        }

        // --- Mini Calendar Root ---
        function renderMini() {
            const root = document.getElementById('mini-cal-root'); root.innerHTML = '';
            ["S","M","T","W","T","F","S"].forEach(l => root.innerHTML += `<div class="mini-day">${l}</div>`);
            const y=2026, m=1, days=new Date(y,m+1,0).getDate(), first=new Date(y,m,1).getDay();
            for(let i=0; i<first; i++) root.innerHTML += `<div></div>`;
            for(let i=1; i<=days; i++) {
                const ds = new Date(y, m, i).toDateString();
                root.innerHTML += `<div class="mini-date ${ds === selDate ? 'active' : ''}" onclick="pickDate('${ds}')">${i}</div>`;
            }
        }
        function pickDate(ds) { selDate = ds; renderD(); }

        // --- Common Logic ---
        function render() { renderM(); renderW(); renderD(); }
        function save() { localStorage.setItem('kmg_v14_db', JSON.stringify(db)); }
        function tog(type, id) { const it = db[type].find(x => x.id == id); it.done = !it.done; render(); save(); }
        function del(type, id) { db[type] = db[type].filter(x => x.id != id); render(); save(); }
        function upP(type, id, pid) { db[type].find(x => x.id == id).pid = pid; render(); save(); }
        
        function updateSels() {
            const wp = document.getElementById('w-p'); wp.innerHTML = optM();
            const dp = document.getElementById('d-p'); dp.innerHTML = optW();
        }
        function optM(cur) {
            let h = `<option value="etc">ETC (ÏóÜÏùå)</option>`;
            db.m.forEach(m => h += `<option value="${m.id}" ${cur==m.id?'selected':''}>${m.text}</option>`);
            return h;
        }
        function optW(cur) {
            let h = `<option value="etc">ETC (ÏóÜÏùå)</option>`;
            db.w.forEach(w => h += `<option value="${w.id}" ${cur==w.id?'selected':''}>${w.text}</option>`);
            return h;
        }

        function sync() {
            const n = new Date();
            document.getElementById('clock').textContent = `${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}`;
            document.getElementById('date').textContent = n.toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric'});
        }

        async function fetchAI() {
            try {
                const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent('https://news.google.com/rss/search?q=AI&hl=ko&gl=KR&ceid=KR:ko')}`);
                const data = await res.json();
                const container = document.getElementById('news'); container.innerHTML = '';
                data.items.slice(0, 5).forEach(i => container.innerHTML += `<a href="${i.link}" target="_blank" style="color:#eee; font-size:0.75rem; text-decoration:none; opacity:0.6;">‚Ä¢ ${i.title}</a>`);
            } catch(e) {}
        }

        function genReport(type) { alert(`[${type.toUpperCase()} ANALYSIS]\nÌòÑÏû¨ Îì±Î°ùÎêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏõîÍ∞Ñ Îã¨Î†•Ïóê ÏÑ±Í≥µÏ†ÅÏúºÎ°ú ÎèôÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§. ÏßÄÌúòÎ•º Í≥ÑÏÜçÌïòÏã≠ÏãúÏò§.`); }

        ui('daily'); sync(); setInterval(sync, 1000); fetchAI();
    </script>
</body>
</html>
