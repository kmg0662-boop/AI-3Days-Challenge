<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KMG COMMAND CENTER | ETHER HUD v13.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@100;300;400;500;600;700;800;900&family=Outfit:wght@100;300;400;500;700;900&family=Space+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00f2fe;
            --accent: #8b5cf6;
            --danger: #ff4d4d;
            --bg: #030305;
            --panel: rgba(10, 10, 15, 0.75);
            --border: rgba(255, 255, 255, 0.1);
            --text: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Pretendard', sans-serif; }
        
        /* --- Spline-like Ether Background --- */
        body { 
            background-color: var(--bg); 
            color: var(--text); 
            height: 100vh; 
            overflow: hidden; 
            display: flex;
            position: relative;
        }

        .ether-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            background: 
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(0, 242, 254, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 1) 0%, transparent 100%);
            filter: blur(80px);
            animation: etherFloat 20s infinite alternate;
        }
        @keyframes etherFloat {
            0% { transform: scale(1) translate(0,0); }
            100% { transform: scale(1.1) translate(20px, 20px); }
        }

        .wand-light {
            position: fixed; width: 600px; height: 600px;
            background: radial-gradient(circle at center, rgba(0, 242, 254, 0.12) 0%, transparent 70%);
            pointer-events: none; z-index: 9999; transform: translate(-50%, -50%);
            mix-blend-mode: screen; filter: blur(20px);
        }

        #app {
            display: grid;
            grid-template-columns: 300px 1fr 340px;
            width: 100%; height: 100vh;
            padding: 25px; gap: 25px;
            position: relative; z-index: 10;
        }

        .glass-panel {
            background: var(--panel);
            backdrop-filter: blur(60px);
            border: 1px solid var(--border);
            border-radius: 36px;
            display: flex; flex-direction: column; overflow: hidden;
            box-shadow: 0 40px 100px rgba(0,0,0,0.6);
        }

        /* --- Sidebar Left --- */
        .sidebar { padding: 30px; display: flex; flex-direction: column; gap: 20px; }
        .nav-btn {
            padding: 16px 20px; border-radius: 16px; cursor: pointer; display: flex; align-items: center; gap: 12px;
            font-weight: 600; transition: 0.3s; color: rgba(255,255,255,0.4); font-size: 0.9rem;
            border: 1px solid transparent;
        }
        .nav-btn.active { background: rgba(0, 242, 254, 0.08); border-color: var(--primary); color: var(--primary); }

        .timer-box { margin-top: auto; padding: 25px; background: rgba(255,255,255,0.03); border-radius: 24px; border: 1px solid var(--border); }
        .timer-time { font-family: 'Space Mono'; font-size: 2.2rem; text-align: center; color: var(--primary); text-shadow: 0 0 20px rgba(0,242,254,0.4); }

        /* --- Main Content --- */
        .main-view { padding: 35px; display: flex; flex-direction: column; overflow: hidden; }
        .section { display: none; height: 100%; flex-direction: column; overflow: hidden; }
        .section.active { display: flex; }

        .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-shrink: 0; }
        .header-row h2 { font-family: 'Outfit'; font-size: 2.2rem; letter-spacing: -1px; }

        /* Unified List Styles */
        .list-container { flex-grow: 1; overflow-y: auto; padding-right: 15px; display: flex; flex-direction: column; gap: 12px; }
        .task-card { 
            background: rgba(255,255,255,0.02); border: 1px solid var(--border); padding: 18px 24px; border-radius: 20px;
            display: flex; align-items: center; gap: 20px; transition: 0.3s;
        }
        .task-card:hover { border-color: var(--primary); transform: translateX(5px); }
        .task-card.done { opacity: 0.25; }
        .chk { width: 26px; height: 26px; border: 2.5px solid var(--border); border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .task-card.done .chk { background: var(--primary); border: none; }
        
        .p-lbl { font-size: 0.65rem; color: var(--accent); letter-spacing: 2px; text-transform: uppercase; font-weight: 800; display: block; margin-bottom: 4px; }
        .t-txt { font-weight: 500; font-size: 1.05rem; }

        /* --- Monthly Calendar (Perfect Fit) --- */
        .cal-layout { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: 40px repeat(5, 1fr); gap: 10px; flex-grow: 1; height: 100%; max-height: 100%; border: 1px solid var(--border); border-radius: 20px; padding: 15px; }
        .cal-lbl { text-align: center; font-size: 0.75rem; font-weight: 900; color: rgba(255,255,255,0.3); }
        .cell { 
            border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; padding: 8px; font-size: 0.85rem;
            display: flex; flex-direction: column; gap: 5px; overflow-y: auto; background: rgba(255,255,255,0.01);
        }
        .cell::-webkit-scrollbar { width: 0px; }
        .cell.today { border-color: var(--primary); background: rgba(0,242,254,0.03); }
        .m-tag { background: var(--accent); color: #fff; font-size: 0.65rem; padding: 4px 8px; border-radius: 6px; overflow: hidden; white-space: normal; line-height: 1.3; cursor: pointer; }
        .m-tag.done { text-decoration: line-through; opacity: 0.3; }

        /* --- Interaction Bar --- */
        .bar { display: flex; gap: 12px; margin-top: 25px; background: rgba(255,255,255,0.04); padding: 15px; border-radius: 20px; flex-shrink: 0; }
        .in { background: transparent; border: 1px solid var(--border); color: #fff; padding: 12px; border-radius: 12px; font-size: 0.9rem; outline: none; }
        .btn { background: var(--primary); color: #000; font-weight: 800; border: none; padding: 0 25px; border-radius: 12px; cursor: pointer; transition: 0.3s; }
        .btn:hover { transform: scale(1.05); filter: brightness(1.1); box-shadow: 0 0 30px var(--primary); }

        /* --- Sidebar Right --- */
        .side-right { padding: 30px; display: flex; flex-direction: column; gap: 30px; }
        .node { background: rgba(255,255,255,0.02); padding: 25px; border-radius: 28px; border: 1px solid var(--border); }
        .lbl { font-size: 0.7rem; color: rgba(255,255,255,0.4); letter-spacing: 3px; margin-bottom: 10px; display: block; }
    </style>
</head>
<body onmousemove="moveWand(event)">
    <div class="ether-bg"></div>
    <div class="wand-light" id="wand"></div>

    <main id="app">
        <section class="glass-panel sidebar">
            <h2 style="font-family:'Outfit'; font-size:1.4rem; color:var(--primary); margin-bottom:20px; letter-spacing:2px;">KMG BASE</h2>
            <div class="nav-btn active" onclick="tab('daily')"><span>üìå</span> DAILY ACTION</div>
            <div class="nav-btn" onclick="tab('weekly')"><span>üìä</span> WEEKLY GOAL</div>
            <div class="nav-btn" onclick="tab('monthly')"><span>üóìÔ∏è</span> MONTHLY VISION</div>

            <div class="timer-box">
                <div class="timer-time" id="t-display">25:00</div>
                <div style="display:flex; gap:8px; margin-top:15px;">
                    <button class="btn" style="flex:1; padding:10px; font-size:0.7rem;" id="t-act" onclick="toggleT()">START</button>
                    <button class="btn" style="flex:1; padding:10px; font-size:0.7rem; background:rgba(255,255,255,0.1); color:#fff;" onclick="resetT()">RESET</button>
                </div>
                <input type="number" id="t-val" class="in" style="width:100%; margin-top:10px; text-align:center; padding:5px;" placeholder="Min">
            </div>
        </section>

        <section class="glass-panel main-view">
            <!-- DAILY -->
            <div id="v-daily" class="section active">
                <div class="header-row">
                    <h2>Daily Progress</h2>
                    <button class="btn" onclick="openR('daily')">REPORT</button>
                </div>
                <div class="list-container" id="d-list"></div>
                <div class="bar">
                    <input type="text" id="d-t" class="in" style="width:100px;" placeholder="09:00">
                    <input type="text" id="d-x" class="in" style="flex:1;" placeholder="ÌñâÎèô ÏßÄÌúò ÏûÖÎ†• (ÏÜå)">
                    <select id="d-p" class="in" style="width:140px; background:#111;"></select>
                    <button class="btn" onclick="addD()">ADD</button>
                </div>
            </div>

            <!-- WEEKLY -->
            <div id="v-weekly" class="section">
                <div class="header-row">
                    <h2>Weekly Strategy</h2>
                    <button class="btn" onclick="openR('weekly')">REPORT</button>
                </div>
                <div class="list-container" id="w-list"></div>
                <div class="bar">
                    <select id="w-d" class="in" style="background:#111;"><option>Mon</option><option>Tue</option><option>Wed</option><option>Thu</option><option>Fri</option><option>Sat</option><option>Sun</option></select>
                    <input type="text" id="w-x" class="in" style="flex:1;" placeholder="Ï£ºÍ∞Ñ Ï†ÑÎûµ Î™©Ìëú (Ï§ë)">
                    <select id="w-p" class="in" style="width:140px; background:#111;"></select>
                    <button class="btn" onclick="addW()">ADD</button>
                </div>
            </div>

            <!-- MONTHLY -->
            <div id="v-monthly" class="section">
                <div class="header-row">
                    <h2>Monthly Vision</h2>
                    <button class="btn" onclick="openR('monthly')">REPORT</button>
                </div>
                <div class="cal-layout" id="cal-root"></div>
                <div class="bar">
                    <input type="date" id="m-d" class="in" style="width:160px;">
                    <input type="text" id="m-x" class="in" style="flex:1;" placeholder="Î≥∏Ïõî ÌïµÏã¨ ÎßàÏùºÏä§ÌÜ§ (ÎåÄ)">
                    <button class="btn" onclick="addM()">ADD</button>
                </div>
            </div>
        </section>

        <section class="glass-panel side-right">
            <div class="node">
                <span class="lbl">COMMAND CLOCK</span>
                <p id="clock" style="font-family:'Space Mono'; font-size:2rem; font-weight:700; color:var(--primary);">21:44</p>
                <p id="date" style="font-size:0.8rem; opacity:0.6; margin-top:5px;">Feb 13, 2026 Friday</p>
            </div>
            <div class="node" style="flex-grow:1; display:flex; flex-direction:column;">
                <span class="lbl">GLOBAL AI PULSE</span>
                <div id="news" style="overflow-y:auto; flex-grow:1; display:flex; flex-direction:column; gap:15px;"></div>
            </div>
        </section>
    </main>

    <script>
        let db = JSON.parse(localStorage.getItem('kmg_v13_db')) || { m: [], w: [], d: [] };

        function moveWand(e) {
            const w = document.getElementById('wand');
            w.style.left = e.clientX + 'px'; w.style.top = e.clientY + 'px';
        }

        function tab(t) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(`v-${t}`).className = 'section active';
            event.currentTarget.className = 'nav-btn active';
            render();
        }

        // --- Monthly Logic ---
        function renderM() {
            const root = document.getElementById('cal-root'); root.innerHTML = '';
            ["S","M","T","W","T","F","S"].forEach(l => root.innerHTML += `<div class="cal-lbl">${l}</div>`);
            const y=2026, m=1, days=new Date(y,m+1,0).getDate(), first=new Date(y,m,1).getDay();
            for(let i=0; i<first; i++) root.innerHTML += `<div></div>`;
            for(let i=1; i<=days; i++) {
                const date = `2026-02-${String(i).padStart(2,'0')}`;
                const items = db.m.filter(it => it.date === date);
                let html = `<div class="cell ${i===13?'today':''}"><b>${i}</b>`;
                items.forEach(it => html += `<div class="m-tag ${it.done?'done':''}" onclick="tog('m',${it.id})">${it.text}</div>`);
                html += `</div>`; root.innerHTML += html;
            }
            updateSels();
        }

        function addM() {
            const date = document.getElementById('m-d').value, text = document.getElementById('m-x').value;
            if(!date || !text) return alert("ÌïÑÏàò Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî.");
            db.m.push({ id: Date.now(), text, date, done: false });
            renderM(); save();
        }

        // --- Weekly Logic ---
        function renderW() {
            const root = document.getElementById('w-list'); root.innerHTML = '';
            db.w.forEach(it => {
                const p = db.m.find(mi => mi.id == it.pid);
                root.innerHTML += `
                    <div class="task-card ${it.done?'done':''}">
                        <div class="chk" onclick="tog('w',${it.id})">${it.done?'‚úì':''}</div>
                        <div style="flex:1;">
                            <span class="p-lbl">${it.day} | Parent: ${p?p.text:'ETC'}</span>
                            <span class="t-txt">${it.text}</span>
                        </div>
                        <button onclick="del('w',${it.id})" style="background:transparent; border:none; color:var(--danger); cursor:pointer;">‚úï</button>
                    </div>`;
            });
            updateSels();
        }

        function addW() {
            const day = document.getElementById('w-d').value, text = document.getElementById('w-x').value, pid = document.getElementById('w-p').value;
            if(!text) return;
            db.w.push({ id: Date.now(), text, day, pid, done: false });
            renderW(); save();
        }

        // --- Daily Logic ---
        function renderD() {
            const root = document.getElementById('d-list'); root.innerHTML = '';
            db.d.forEach(it => {
                const p = db.w.find(wi => wi.id == it.pid);
                root.innerHTML += `
                    <div class="task-card ${it.done?'done':''}">
                        <div class="chk" onclick="tog('d',${it.id})">${it.done?'‚úì':''}</div>
                        <div style="flex:1;">
                            <span class="p-lbl">${it.time} | Parent: ${p?p.text:'ETC'}</span>
                            <span class="t-txt">${it.text}</span>
                        </div>
                        <button onclick="del('d',${it.id})" style="background:transparent; border:none; color:var(--danger); cursor:pointer;">‚úï</button>
                    </div>`;
            });
        }

        function addD() {
            const time = document.getElementById('d-t').value, text = document.getElementById('d-x').value, pid = document.getElementById('d-p').value;
            if(!text) return;
            db.d.push({ id: Date.now(), text, time, pid, done: false });
            renderD(); save();
        }

        // --- Core ---
        function render() { renderM(); renderW(); renderD(); }
        function save() { localStorage.setItem('kmg_v13_db', JSON.stringify(db)); }
        function tog(type, id) { const it = db[type].find(x => x.id == id); it.done = !it.done; render(); save(); }
        function del(type, id) { 
            db[type] = db[type].filter(x => x.id != id); 
            if(type === 'm') db.w.forEach(wi => { if(wi.pid == id) wi.pid = 'etc'; });
            if(type === 'w') db.d.forEach(di => { if(di.pid == id) di.pid = 'etc'; });
            render(); save(); 
        }

        function updateSels() {
            const wp = document.getElementById('w-p'); wp.innerHTML = `<option value="etc">ETC (ÏóÜÏùå)</option>`;
            db.m.forEach(mi => wp.innerHTML += `<option value="${mi.id}">${mi.text}</option>`);
            const dp = document.getElementById('d-p'); dp.innerHTML = `<option value="etc">ETC (ÏóÜÏùå)</option>`;
            db.w.forEach(wi => dp.innerHTML += `<option value="${wi.id}">${wi.text}</option>`);
        }

        // --- Timer ---
        let tr = 1500, ta = false, ti;
        function toggleT() {
            const b = document.getElementById('t-act');
            if(ta) { clearInterval(ti); b.textContent = 'START'; }
            else {
                ti = setInterval(() => { tr--; upT(); if(tr<=0){clearInterval(ti); alert("FINISH");}}, 1000);
                b.textContent = 'PAUSE';
            }
            ta = !ta;
        }
        function resetT() { clearInterval(ti); ta = false; const v = document.getElementById('t-val').value; tr = v ? v*60 : 1500; upT(); document.getElementById('t-act').textContent = 'START'; }
        function upT() { const m = Math.floor(tr/60), s=tr%60; document.getElementById('t-display').textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`; }

        function sync() {
            const n = new Date();
            document.getElementById('clock').textContent = `${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}`;
            document.getElementById('date').textContent = n.toLocaleDateString('en-US', {month:'short', day:'numeric', year:'numeric', weekday:'long'});
        }

        async function fetchAI() {
            try {
                const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent('https://news.google.com/rss/search?q=AI&hl=ko&gl=KR&ceid=KR:ko')}`);
                const data = await res.json();
                const container = document.getElementById('news');
                container.innerHTML = '';
                data.items.slice(0, 5).forEach(i => container.innerHTML += `<a href="${i.link}" target="_blank" style="color:#fff; font-size:0.8rem; text-decoration:none; line-height:1.4; opacity:0.7;">‚Ä¢ ${i.title}</a>`);
            } catch(e) {}
        }
        
        function openR(type) {
            const list = db[type === 'm' ? 'm' : (type === 'w' ? 'w' : 'd')];
            const done = list.filter(it => it.done).length;
            alert(`[${type.toUpperCase()} REPORT]\nÏßÑÏ≤ôÎèÑ: ${Math.round(done/list.length*100) || 0}%\nÏ¥ù Ìï≠Î™©: ${list.length}\nÏôÑÎ£å: ${done}`);
        }

        render(); sync(); setInterval(sync, 1000); fetchAI();
    </script>
</body>
</html>
